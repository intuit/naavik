{
    "apiVersion": "admiral.io/v1",
    "kind": "TrafficConfig",
    "metadata": {
      "labels": {
        "asset": "httpbin",
        "env": "e2e"
      },
      "name": "httpbin",
      "namespace": "admiral"
    },
    "spec": {
      "edgeService": {
        "filters": [
          {
            "name": "filter-3387192"
          },
          {
            "name": "filter--671448791"
          }
        ],
        "targets": [
          {
            "meshDNS": "e2e-express.httpbin.mesh",
            "name": "expressStack",
            "port": 443,
            "socketTimeout": 5000
          },
          {
            "meshDNS": "e2e.httpbin.mesh",
            "name": "customStack",
            "port": 443,
            "socketTimeout": 5000
          }
        ],
        "targetGroups": [
          {
            "name": "CustomExpressGroup",
            "weights": [
              {
                "name": "custom",
                "weight": 50
              },
              {
                "name": "express",
                "weight": 50
              }
            ]
          }
        ],
        "routes": [
          {
            "filterSelector": "filter--671448791",
            "inbound": "intuit_offeringid=com.creditkarma.networth,intuit_fdp_flowname=AddConnection;/v1/{authType}!facade_request=*;/*",
            "name": "v1",
            "outbound": "/*",
            "timeout": 8000,
            "config": [
              {
                "targetGroupSelector": "custom",
                "targetSelector": "customStack"
              },
              {
                "targetGroupSelector": "express",
                "targetSelector": "expressStack"
              }
            ],
            "workloadEnvSelectors": [
              "e2e",
              "e2e-1"
            ]
          },
          {
            "filterSelector": "filter-3387192",
            "inbound": "/health/full",
            "name": "Health Check",
            "outbound": "/health/full",
            "timeout": 6000,
            "workloadEnvSelectors": [
              "e2e",
              "e2e-1"
            ]
          }
        ]
      },
      "quotaGroup": {
        "appQuotaGroups": [
          {
            "associatedApps": [
              "httpbin"
            ],
            "name": "App Throttling Plan",
            "quotas": [
              {
                "algorithm": "scalable",
                "behaviour": "softThrottle",
                "keyType": "appIdOrToken",
                "maxAmount": 200,
                "name": "Total",
                "rule": "/*",
                "timePeriod": "1m"
              }
            ],
            "workloadEnvSelectors": [
              "e2e",
              "e2e-1"
            ]
          }
        ],
        "totalQuotaGroups": [
          {
            "cpuLimit": 80,
            "description": "Total capacity of service",
            "memoryLimit": 80,
            "name": "Total Throttling Plan",
            "podLevelThreshold": 100,
            "quotas": [
              {
                "algorithm": "scalable",
                "behaviour": "softThrottle",
                "keyType": "any",
                "maxAmount": 200,
                "name": "Total",
                "rule": "/*",
                "timePeriod": "1m"
              }
            ],
            "regionLevelLimit": true,
            "workloadEnvSelectors": [
              "e2e"
            ]
          }
        ]
      },
      "workloadEnvs": [
        "e2e",
        "e2e-1"
      ]
    }
  }